
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Week 1 - Introduction to MongoDB Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism-tomorrow.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../week-2/lesson.html" />
    
    
    <link rel="prev" href="../" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Course</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Before you start
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../others/lesson0.html">
            
                <a href="../../others/lesson0.html">
            
                    
                    Week 0 - Introduction and basic setup
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../html-css/">
            
                <a href="../../html-css/">
            
                    
                    HTML/CSS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../html-css/week-1/lesson.html">
            
                <a href="../../html-css/week-1/lesson.html">
            
                    
                    Week 1 - Semantic HTML and CSS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../../html-css/week-2/lesson.html">
            
                <a href="../../html-css/week-2/lesson.html">
            
                    
                    Week 2 - Responsive Web and layout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../../html-css/week-3/lesson.html">
            
                <a href="../../html-css/week-3/lesson.html">
            
                    
                    Week 3 - Design frameworks, Naming patterns and Forms
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../js-core-1/">
            
                <a href="../../js-core-1/">
            
                    
                    JavaScript I
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../../js-core-1/week-1/lesson.html">
            
                <a href="../../js-core-1/week-1/lesson.html">
            
                    
                    Week 1 - Hello JavaScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../../js-core-1/week-2/lesson.html">
            
                <a href="../../js-core-1/week-2/lesson.html">
            
                    
                    Week 2 - Conditionals and Arrays
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../../js-core-1/week-3/lesson.html">
            
                <a href="../../js-core-1/week-3/lesson.html">
            
                    
                    Week 3 - More Arrays
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../js-core-2/">
            
                <a href="../../js-core-2/">
            
                    
                    JavaScript II
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../../js-core-2/week-1/lesson.html">
            
                <a href="../../js-core-2/week-1/lesson.html">
            
                    
                    Week 1 - Objects
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../../js-core-2/week-2/lesson.html">
            
                <a href="../../js-core-2/week-2/lesson.html">
            
                    
                    Week 2 - JS in the Browser
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../../js-core-2/week-3/lesson.html">
            
                <a href="../../js-core-2/week-3/lesson.html">
            
                    
                    Week 3 - Asynchronous and The Web
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../../js-core-3/">
            
                <a href="../../js-core-3/">
            
                    
                    JavaScript III
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../../js-core-3/week-1/lesson.html">
            
                <a href="../../js-core-3/week-1/lesson.html">
            
                    
                    Week 1 - Debugging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../../js-core-3/week-2/lesson.html">
            
                <a href="../../js-core-3/week-2/lesson.html">
            
                    
                    Week 2 - APIs and Fetch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../../js-core-3/week-3/lesson.html">
            
                <a href="../../js-core-3/week-3/lesson.html">
            
                    
                    Week 3 - Scope and ES6
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../../react/">
            
                <a href="../../react/">
            
                    
                    React
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../../react/week-1/lesson.html">
            
                <a href="../../react/week-1/lesson.html">
            
                    
                    Week 1 - React 101
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../../react/week-2/lesson.html">
            
                <a href="../../react/week-2/lesson.html">
            
                    
                    Week 2 - Reacting to Changes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../../react/week-3/lesson.html">
            
                <a href="../../react/week-3/lesson.html">
            
                    
                    Week 3 - Fetching Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../../react/week-4/lesson.html">
            
                <a href="../../react/week-4/lesson.html">
            
                    
                    Routing (optional)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../../react/classes-optional/lesson.html">
            
                <a href="../../react/classes-optional/lesson.html">
            
                    
                    Class components (optional)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../../node/">
            
                <a href="../../node/">
            
                    
                    Node
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../../node/week-1/lesson.html">
            
                <a href="../../node/week-1/lesson.html">
            
                    
                    Week 1 - Node and Express 101
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../../node/week-2/lesson.html">
            
                <a href="../../node/week-2/lesson.html">
            
                    
                    Week 2 - Middleware, Templating and APIs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../../node/week-3/lesson.html">
            
                <a href="../../node/week-3/lesson.html">
            
                    
                    Week 3 - Advanced Node
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../../db/">
            
                <a href="../../db/">
            
                    
                    SQL Databases
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../../db/week-1/lesson.html">
            
                <a href="../../db/week-1/lesson.html">
            
                    
                    Week 1 - Introduction to SQL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../../db/week-2/lesson.html">
            
                <a href="../../db/week-2/lesson.html">
            
                    
                    Week 2 - More SQL and integration with NodeJS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../../db/week-3/lesson.html">
            
                <a href="../../db/week-3/lesson.html">
            
                    
                    Week 3 - More integration with NodeJS
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../">
            
                <a href="../">
            
                    
                    MongoDB
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.10.1" data-path="lesson.html">
            
                <a href="lesson.html">
            
                    
                    Week 1 - Introduction to MongoDB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../week-2/lesson.html">
            
                <a href="../week-2/lesson.html">
            
                    
                    Week 2 - More MongoDB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../week-3/lesson.html">
            
                <a href="../week-3/lesson.html">
            
                    
                    Week 3 - Advanced MongoDB
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../../finalproject/intro.html">
            
                <a href="../../finalproject/intro.html">
            
                    
                    Final Project
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../../finalproject/intro.html">
            
                <a href="../../finalproject/intro.html">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../../finalproject/roles.html">
            
                <a href="../../finalproject/roles.html">
            
                    
                    Roles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="../../finalproject/firstweek.html">
            
                <a href="../../finalproject/firstweek.html">
            
                    
                    First Week
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.4" data-path="../../finalproject/finalweek.html">
            
                <a href="../../finalproject/finalweek.html">
            
                    
                    Final Week
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Workshops</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../../others/deployment/1-for-html-module/workshop-1-basic-automatic-deployment-with-netlify-mentor-notes.html">
            
                <a href="../../others/deployment/1-for-html-module/workshop-1-basic-automatic-deployment-with-netlify-mentor-notes.html">
            
                    
                    Deploying Code Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../../node/week-1/workshop.html">
            
                <a href="../../node/week-1/workshop.html">
            
                    
                    Express Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../../node/week-3/workshop.html">
            
                <a href="../../node/week-3/workshop.html">
            
                    
                    Hotel Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../../others/aws-workshop-2.html">
            
                <a href="../../others/aws-workshop-2.html">
            
                    
                    AWS & DynamoDB Workshop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../../others/git-desktop-workshop.html">
            
                <a href="../../others/git-desktop-workshop.html">
            
                    
                    Github Desktop Workshop
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Guides</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../../html-css/compile-scss-instructions.html">
            
                <a href="../../html-css/compile-scss-instructions.html">
            
                    
                    Compiling SCSS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../../others/coding-101.html">
            
                <a href="../../others/coding-101.html">
            
                    
                    Coding 101
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../../others/react-cheatsheet.html">
            
                <a href="../../others/react-cheatsheet.html">
            
                    
                    React Cheatsheet
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Modules</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../../others/java.html">
            
                <a href="../../others/java.html">
            
                    
                    Java Module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../../others/mongodb-101.html">
            
                <a href="../../others/mongodb-101.html">
            
                    
                    MongoDB Module
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">For Students</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../../others/coding-standards.html">
            
                <a href="../../others/coding-standards.html">
            
                    
                    Coding Standards and Best Practices
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">For Teachers</li>
        
        
    
        <li class="chapter " data-level="6.1" >
            
                <span>
            
                    
                    Teaching Notes
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.1" data-path="../../html-css/week-1/mentors.html">
            
                <a href="../../html-css/week-1/mentors.html">
            
                    
                    HTML/CSS - Week 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.2" data-path="../../html-css/week-2/mentors.html">
            
                <a href="../../html-css/week-2/mentors.html">
            
                    
                    HTML/CSS - Week 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3" data-path="../../html-css/week-3/mentors.html">
            
                <a href="../../html-css/week-3/mentors.html">
            
                    
                    HTML/CSS - Week 3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.4" data-path="../../js-core-1/week-1/mentors.html">
            
                <a href="../../js-core-1/week-1/mentors.html">
            
                    
                    JavaScript I - Week 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.5" data-path="../../js-core-1/week-2/mentors.html">
            
                <a href="../../js-core-1/week-2/mentors.html">
            
                    
                    JavaScript I - Week 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.6" data-path="../../js-core-1/week-3/mentors.html">
            
                <a href="../../js-core-1/week-3/mentors.html">
            
                    
                    JavaScript I - Week 3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.7" data-path="../../js-core-2/week-1/mentors.html">
            
                <a href="../../js-core-2/week-1/mentors.html">
            
                    
                    JavaScript II - Week 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.8" data-path="../../js-core-2/week-2/mentors.html">
            
                <a href="../../js-core-2/week-2/mentors.html">
            
                    
                    JavaScript II - Week 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.9" data-path="../../js-core-2/week-3/mentors.html">
            
                <a href="../../js-core-2/week-3/mentors.html">
            
                    
                    JavaScript II - Week 3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.10" data-path="../../js-core-3/week-1/mentors.html">
            
                <a href="../../js-core-3/week-1/mentors.html">
            
                    
                    JavaScript III - Week 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.11" data-path="../../js-core-3/week-2/mentors.html">
            
                <a href="../../js-core-3/week-2/mentors.html">
            
                    
                    JavaScript III - Week 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.12" data-path="../../js-core-3/week-3/mentors.html">
            
                <a href="../../js-core-3/week-3/mentors.html">
            
                    
                    JavaScript III - Week 3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.13" data-path="../../react/week-1/mentors.html">
            
                <a href="../../react/week-1/mentors.html">
            
                    
                    React - Week 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.14" data-path="../../react/week-2/mentors.html">
            
                <a href="../../react/week-2/mentors.html">
            
                    
                    React - Week 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.15" data-path="../../react/week-3/mentors.html">
            
                <a href="../../react/week-3/mentors.html">
            
                    
                    React - Week 3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.16" data-path="../../node/week-1/mentors.html">
            
                <a href="../../node/week-1/mentors.html">
            
                    
                    Node - Week 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.17" data-path="../../node/week-2/mentors.html">
            
                <a href="../../node/week-2/mentors.html">
            
                    
                    Node - Week 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.18" data-path="../../node/week-3/mentors.html">
            
                <a href="../../node/week-3/mentors.html">
            
                    
                    Node - Week 3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.19" data-path="../../db/week-1/mentors.html">
            
                <a href="../../db/week-1/mentors.html">
            
                    
                    Databases - Week 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.20" data-path="../../db/week-2/mentors.html">
            
                <a href="../../db/week-2/mentors.html">
            
                    
                    Databases - Week 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.21" data-path="../../db/week-3/mentors.html">
            
                <a href="../../db/week-3/mentors.html">
            
                    
                    Databases - Week 3
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Week 1 - Introduction to MongoDB</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <p><img src="https://img.shields.io/badge/status-ready-green.svg" alt="Lesson Ready"></p>
<h1 id="mongodb---1">MongoDB - 1</h1>
<hr>
<p><strong>Teaching this lesson?</strong></p>
<p>Read the Mentors Notes <a href="mentors.md">here</a></p>
<hr>
<h2 id="outline">Outline</h2>
<ul>
<li>What is a database?</li>
<li>Database management systems</li>
<li>MongoDB</li>
<li>Review of callback functions</li>
<li>Connecting to a database from an Express server</li>
<li>Getting all documents in a collection</li>
<li>Searching for documents in a collection<ul>
<li>Getting documents with a field value</li>
<li>Getting documents with multiple field values</li>
</ul>
</li>
<li>IDs</li>
<li>Getting one document in a collection</li>
<li>Optional: search operations<ul>
<li><code>$or</code></li>
<li><code>$ne</code>, <code>$gt</code>, <code>$gte</code>, <code>$lt</code>, <code>$lte</code></li>
</ul>
</li>
</ul>
<h2 id="what-is-a-database">What is a database?</h2>
<p>A database is <strong>an organised collection of data</strong>. Example: the <a href="https://www.imdb.com/" target="_blank">Internet Movie Database (IMDb)</a> is an organised collection of information about films. You can even say that a few simple files are a kind of database.</p>
<p>However, when people people talk about website databases, they are often really talking about <em>database management systems</em>.</p>
<h2 id="database-management-systems">Database management systems</h2>
<p>A database management system (DBMS) is <strong>a kind of software for creating, managing, and using databases</strong>. DBMSs are good for keeping data even if you restart the server. They are extra helpful for large amounts of data, because they can let us</p>
<ul>
<li>get and change data quickly,</li>
<li>use a database from many computers at the same time,</li>
<li>and more.</li>
</ul>
<h2 id="mongodb">MongoDB</h2>
<p>In this module, you will learn to use a DBMS named &quot;MongoDB Server&quot; -- usually just called &quot;MongoDB&quot; (or &quot;Mongo&quot;). MongoDB stores data in a format similar to JSON (but not exactly the same). It also lets you use JavaScript to access the data.</p>
<p>MongoDB is fairly popular, but it is not <em>the most</em> popular DBMS. More popular DBMSs use a coding language called &quot;SQL&quot; and store data in tables. You will learn MongoDB, though, so that you do not need to learn a new language or data format.</p>
<p>With MongoDB, the JSON-like objects are called &quot;<strong>documents</strong>&quot;. These documents are put in named groups called &quot;<strong>collections</strong>&quot;. Each database in MongoDB is a named group of collections.</p>
<p><img src="assets/database.png" alt="Database with collections and documents"></p>
<p>For example, in this lesson, we will use a database called <code>music</code>. In this database, there is one collection: <code>tracks</code>. The collection has documents like this:</p>
<pre class="language-"><code class="lang-js"><span class="token punctuation">{</span>
  <span class="token string">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5cf2eb7d1c9d4400006fca92&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Genesis&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;artist&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Justice&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;album&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Cross&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;year&quot;</span><span class="token operator">:</span> <span class="token number">2007</span>
<span class="token punctuation">}</span>
</code></pre>
<p>(You might notice the <code>_id</code> field has &quot;<code>ObjectId</code>&quot;, which does not work in JSON. We will learn about this later.)</p>
<h2 id="review-of-callback-functions">Review of callback functions</h2>
<p>The typical way to use MongoDB with a Node server uses JavaScript functions called &quot;callback functions&quot;. A callback function is <strong>a function that (1) you give to another function and (2) the other function can run</strong>.</p>
<p>For example, there is a built-in function called <code>setTimeout</code>. This function takes two arguments: (1) a callback function and (2) a number of milliseconds. It then runs the callback function after it waits that number of milliseconds.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span>sayHello<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Here, the callback function is <code>sayHello</code>. This code will show the message <code>Hello!</code> in the console after one second (1000 milliseconds).</p>
<p>Another way to write it is like this:</p>
<pre class="language-"><code class="lang-js"><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Here, we give an unnamed callback function to <code>setTimeout</code>. It will do the same thing: show <code>Hello!</code> after one second.</p>
<p>If we want, we can also put callback functions inside of other callback functions:</p>
<pre class="language-"><code class="lang-js"><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Goodbye!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>This will show <code>Hello!</code> after one second and then show <code>Goodbye!</code> after <em>another</em> second.</p>
<p>We can even put <em>another</em> callback function inside of that callback function:</p>
<pre class="language-"><code class="lang-js"><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Goodbye!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello again!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>This will show <code>Hello!</code> after one second, <code>Goodbye!</code> after another second, and then <code>Hello again!</code> after another second.</p>
<p>These nested callback functions can be confusing, but they are important to understand before continuing.</p>
<h4 id="exercises">Exercises:</h4>
<p>(1) Look at this code:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;foobar&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">showString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> string <span class="token operator">=</span> <span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span>showString<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>This should print the string <code>&apos;foobar&apos;</code> after one second.</p>
<p>Which is the callback function?</p>
<ul>
<li>(a) <code>getString</code></li>
<li>(b) <code>showString</code></li>
<li>(c) <code>setTimeout</code></li>
</ul>
<p>(2) Rewrite the code in the previous exercise so that there are no new function names.</p>
<p>(3) Write a new function <code>sayHiAndRun(callback)</code> that takes a callback function, prints <code>Hi!</code>, and then runs the callback function.</p>
<p>(4) Which other functions that you learned in CYF lessons take a callback function as an argument?</p>
<h2 id="connecting-to-a-database-from-an-express-server">Connecting to a database from an Express server</h2>
<p>In the rest of this lesson, we will use an Express server on Glitch that connects to a MongoDB server.</p>
<p>Let&apos;s start by remixing this Glitch web app: <a href="https://glitch.com/~cyf-db-lesson-1" target="_blank">https://glitch.com/~cyf-db-lesson-1</a></p>
<p>After you do that, take a look at the file <code>server.js</code>. Some of this should look familiar to you from previous lessons. However, there is some new code, such as this line near the top:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> mongodb <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>This imports what is called the &quot;MongoDB Node Driver&quot;, which is just some JavaScript that lets you use MongoDB in a Node server. Here is another new line:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> uri <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DATABASE_URI</span><span class="token punctuation">;</span>
</code></pre>
<p>In Node, <code>process.env</code> holds what are called &quot;environment variables&quot;. These are variables that are usually stored outside of the code. They are often used for secret values, such as passwords. On Glitch, you put them in the <code>.env</code> file. Here, other people can see your environment variable names, but <em>only you</em> can see the values. Click on the <code>.env</code> file to see it for yourself.</p>
<p>In this case, the variable is a Uniform Resource Identifier (URI). A URI is like a URL, but instead of <code>http://</code> or <code>https://</code>, it can have other things. It can also include a user name and password. For this lesson, put this in your <code>.env</code> file:</p>
<pre class="language-"><code class="lang-js"><span class="token constant">DATABASE_URI</span><span class="token operator">=</span>mongodb<span class="token operator">+</span>srv<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>cyf<span class="token operator">:</span>LetsLearnMongoDB2019@cluster0<span class="token operator">-</span>cxacx<span class="token punctuation">.</span>mongodb<span class="token punctuation">.</span>net
</code></pre>
<p>Here, we use <code>mongodb+srv</code> instead of <code>http</code> to connect to a MongoDB server. We also add a user name, <code>cyf</code>, and a password, <code>LetsLearnMongoDB2019</code>. Finally, we have the address of the server, which is already hosted somewhere online.</p>
<p>If you go back to <code>server.js</code>, you can also see these lines:</p>
<pre class="language-"><code class="lang-js">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongodb<span class="token punctuation">.</span>MongoClient</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">;</span>

  client<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Here, we see some callback functions. We give one callback function to <code>app.get</code>, and it runs when the user goes to the <code>/</code> endpoint. Next, we see how to make what is called a Mongo &quot;client&quot;: a JavaScript object that we use to connect to the database server using the URI. To connect, we call <code>client.connect</code> and give it another callback function that runs after it finishes connecting. Here, we then give the response <code>Hello, world!</code> and then close the client.</p>
<p>Right now, our code connects to the database server, but it does not do anything with any database. Let&apos;s instead start using the database called <code>music</code>. We can get the database like this:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> db <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">db</span><span class="token punctuation">(</span><span class="token string">&quot;music&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Let&apos;s put this inside of our endpoint and see if it works:</p>
<pre class="language-"><code class="lang-js">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongodb<span class="token punctuation">.</span>MongoClient</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">;</span>

  client<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> db <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">db</span><span class="token punctuation">(</span><span class="token string">&quot;music&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;It worked!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>If you click &quot;Show&quot; on Glitch and pick an option, you should now see &quot;It worked!&quot;</p>
<p>Next, let&apos;s get documents from the database.</p>
<h2 id="getting-all-documents-in-a-collection">Getting all documents in a collection</h2>
<p>To get the documents, we must first get a collection. Remember that a collection is just a bunch of documents.</p>
<p>In our database, there is already a collection called <code>tracks</code>, which has documents for musical recordings. We can get it like this:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> collection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;tracks&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Now, we can use the collection to get the documents. We can do this with the <code>collection.find</code> function, which searches for documents. Let&apos;s just get <em>all</em> documents, so we do not need to give any search arguments to <code>find</code>:</p>
<pre class="language-"><code class="lang-js">collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>This code does not actually give us the tracks yet. Instead, it gives us what is called a &quot;cursor&quot;: an object that <em>points</em> to results in the database. To get the track documents, we can call <code>toArray</code> on the cursor like this:</p>
<pre class="language-"><code class="lang-js">collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> tracks</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// You can do something with the tracks here.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Notice that we give another callback function, which runs when the cursor finishes making an array. Notice also that the first argument in the callback function is <code>error</code>: if there is a problem getting the array, this will have an error object. Otherwise, it will be <code>null</code>, and then can use <code>tracks</code>.</p>
<p>Let&apos;s add this to our code and tell the server to respond with either the error (if there is one) or the tracks:</p>
<pre class="language-"><code class="lang-js">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongodb<span class="token punctuation">.</span>MongoClient</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">;</span>

  client<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> db <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">db</span><span class="token punctuation">(</span><span class="token string">&quot;music&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> collection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;tracks&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> tracks</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>error <span class="token operator">||</span> tracks<span class="token punctuation">)</span><span class="token punctuation">;</span>
      client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>When the page refreshes, you should see JSON text for some tracks like this (without the spaces):</p>
<pre class="language-"><code class="lang-js"><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    _id<span class="token operator">:</span> <span class="token string">&quot;5cf2eb7d1c9d4400006fca92&quot;</span><span class="token punctuation">,</span>
    title<span class="token operator">:</span> <span class="token string">&quot;Genesis&quot;</span><span class="token punctuation">,</span>
    artist<span class="token operator">:</span> <span class="token string">&quot;Justice&quot;</span><span class="token punctuation">,</span>
    album<span class="token operator">:</span> <span class="token string">&quot;Cross&quot;</span><span class="token punctuation">,</span>
    year<span class="token operator">:</span> <span class="token number">2007</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    _id<span class="token operator">:</span> <span class="token string">&quot;5cf6d1bf1c9d4400007568a2&quot;</span><span class="token punctuation">,</span>
    title<span class="token operator">:</span> <span class="token string">&quot;Head/Off&quot;</span><span class="token punctuation">,</span>
    artist<span class="token operator">:</span> <span class="token string">&quot;Sebastian&quot;</span><span class="token punctuation">,</span>
    album<span class="token operator">:</span> <span class="token string">&quot;Ross Ross Ross&quot;</span><span class="token punctuation">,</span>
    year<span class="token operator">:</span> <span class="token number">2006</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    _id<span class="token operator">:</span> <span class="token string">&quot;5cf972f71c9d4400007dc0a4&quot;</span><span class="token punctuation">,</span>
    title<span class="token operator">:</span> <span class="token string">&quot;Flat Beat&quot;</span><span class="token punctuation">,</span>
    artist<span class="token operator">:</span> <span class="token string">&quot;Mr Oizo&quot;</span><span class="token punctuation">,</span>
    album<span class="token operator">:</span> <span class="token string">&quot;Flat Beat&quot;</span><span class="token punctuation">,</span>
    year<span class="token operator">:</span> <span class="token number">1999</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    _id<span class="token operator">:</span> <span class="token string">&quot;5cf973571c9d4400007dc0a5&quot;</span><span class="token punctuation">,</span>
    title<span class="token operator">:</span> <span class="token string">&quot;Safe and Sound&quot;</span><span class="token punctuation">,</span>
    artist<span class="token operator">:</span> <span class="token string">&quot;Justice&quot;</span><span class="token punctuation">,</span>
    album<span class="token operator">:</span> <span class="token string">&quot;Woman&quot;</span><span class="token punctuation">,</span>
    year<span class="token operator">:</span> <span class="token number">2016</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    _id<span class="token operator">:</span> <span class="token string">&quot;5cf973bf1c9d44000067167c&quot;</span><span class="token punctuation">,</span>
    title<span class="token operator">:</span> <span class="token string">&quot;Greel&quot;</span><span class="token punctuation">,</span>
    artist<span class="token operator">:</span> <span class="token string">&quot;Sebastian&quot;</span><span class="token punctuation">,</span>
    album<span class="token operator">:</span> <span class="token string">&quot;Ed Rec Vol. 2&quot;</span><span class="token punctuation">,</span>
    year<span class="token operator">:</span> <span class="token number">2007</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p>We told Express to respond with an array, and Express automatically turned it into JSON text. Notice that the value for <code>_id</code> is a string, but remember from earlier that it was something like <code>ObjectId(&quot;5cf2eb7d1c9d4400006fca92&quot;)</code>. What happened? The <code>ObjectId</code> object gets translated into a string whenever you turn it into JSON text.</p>
<h4 id="exercise">Exercise:</h4>
<p>Make a new Express endpoint on the server for <code>/books</code>. There is another database on the MongoDB server named <code>literature</code> and a collection named <code>books</code>. Connect to that collection on this endpoint and return all the documents. How many of them are there?</p>
<h2 id="searching-for-documents-in-a-collection">Searching for documents in a collection</h2>
<p>Let&apos;s now learn how to get only documents that match some details.</p>
<h3 id="getting-documents-with-a-field-value">Getting documents with a field value</h3>
<p>To get all documents with a field that has a certain value, you can use the same <code>collection.find</code> function, but you give an object with the field and value you want.</p>
<p>For example, if we want all tracks with <code>&quot;artist&quot;: &quot;Justice&quot;</code>, we can do this:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> searchObject <span class="token operator">=</span> <span class="token punctuation">{</span> artist<span class="token operator">:</span> <span class="token string">&quot;Justice&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>searchObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Let&apos;s put this in our code:</p>
<pre class="language-"><code class="lang-js">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongodb<span class="token punctuation">.</span>MongoClient</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">;</span>

  client<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> db <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">db</span><span class="token punctuation">(</span><span class="token string">&quot;music&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> collection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;tracks&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> searchObject <span class="token operator">=</span> <span class="token punctuation">{</span> artist<span class="token operator">:</span> <span class="token string">&quot;Justice&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

    collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>searchObject<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> tracks</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>error <span class="token operator">||</span> tracks<span class="token punctuation">)</span><span class="token punctuation">;</span>
      client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Now, when the user goes to <code>/</code>, they will get only the tracks by Justice.</p>
<h4 id="exercise">Exercise:</h4>
<p>Make a new endpoint for <code>/tracks/search</code>. When a user requests it with the query parameter <code>artist</code>, return only the tracks with that query parameter&apos;s value. For example, if you go to <code>/tracks/search?artist=Sebastian</code>, it should show only the tracks by Sebastian.</p>
<h3 id="getting-documents-with-multiple-field-values">Getting documents with multiple field values</h3>
<p>To get all document with <em>multiple</em> field values, you can just add each field and value to your search object.</p>
<p>For example, if we want all tracks with both <code>&quot;artist&quot;: &quot;Justice&quot;</code> <em>and</em> <code>&quot;year&quot;: 2007</code>, we can just do this:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> searchObject <span class="token operator">=</span> <span class="token punctuation">{</span> artist<span class="token operator">:</span> <span class="token string">&quot;Justice&quot;</span><span class="token punctuation">,</span> year<span class="token operator">:</span> <span class="token number">2007</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>searchObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Let&apos;s put this in our code:</p>
<pre class="language-"><code class="lang-js">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongodb<span class="token punctuation">.</span>MongoClient</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">;</span>

  client<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> db <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">db</span><span class="token punctuation">(</span><span class="token string">&quot;music&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> collection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;tracks&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> searchObject <span class="token operator">=</span> <span class="token punctuation">{</span> artist<span class="token operator">:</span> <span class="token string">&quot;Justice&quot;</span><span class="token punctuation">,</span> year<span class="token operator">:</span> <span class="token number">2007</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

    collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>searchObject<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> tracks</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>error <span class="token operator">||</span> tracks<span class="token punctuation">)</span><span class="token punctuation">;</span>
      client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Now, the user will only get only the tracks by Justice from the year 2007.</p>
<h4 id="exercises">Exercises:</h4>
<ol>
<li><p>Update your endpoint <code>/tracks/search</code> so that it works with the query parameter <code>year</code>, too. For example, if you go to <code>/tracks/search?artist=Sebastian&amp;year=2006</code>, it should show only the tracks by Sebastian from the year 2006.</p>
</li>
<li><p>Update the <code>/tracks/search</code> endpoint so that it works with any combination of the query parameters <code>title</code>, <code>artist</code>, <code>album</code>, and <code>year</code>. For example, if you go to <code>/tracks/search?artist=Sebastian&amp;album=Total</code>, it should show only the track by Sebastian on the album <em>Total</em>.</p>
</li>
</ol>
<h2 id="ids">IDs</h2>
<p>An ID is an identifier: something that is different for every item in a group. From the last module, you might remember seeing ID properties like <code>id: 0</code>, <code>id: 1</code>, <code>id: 2</code>, and so on. However, by default, MongoDB uses fields called <code>_id</code> with special IDs called <code>ObjectId</code>s, which you saw above.</p>
<p><code>ObjectId</code>s have a value made with a number system called &quot;hexadecimal&quot;. Hexadecimal can be represented by a string of the numbers zero to nine and the letters &quot;a&quot; to &quot;f&quot;. For <code>ObjectId</code>s, these strings all have 24 characters. (If you are curious, you can learn more about hexadecimal <a href="https://en.wikipedia.org/wiki/Hexadecimal" target="_blank">here</a> and <code>ObjectId</code>s <a href="https://docs.mongodb.com/manual/reference/method/ObjectId/" target="_blank">here</a>.)</p>
<p>To make an object ID, you can type <code>new mongodb.ObjectID(string)</code> where <code>string</code> is the 24-character hexadecimal string.</p>
<p>For example, if we want to make an <code>ObjectId</code> with the string <code>&apos;5cf2eb7d1c9d4400006fca92&apos;</code>, we can do this:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> string <span class="token operator">=</span> <span class="token string">&quot;5cf2eb7d1c9d4400006fca92&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongodb<span class="token punctuation">.</span>ObjectID</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Here, we assign the <code>ObjectId</code> to <code>id</code>.</p>
<h2 id="getting-one-document-in-a-collection">Getting one document in a collection</h2>
<p>To get only one document in a collection, you can pass a search object to <code>collection.findOne</code>.</p>
<p>For example, if you want to get only one track with the artist Justice, you can do this:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> searchObject <span class="token operator">=</span> <span class="token punctuation">{</span> artist<span class="token operator">:</span> <span class="token string">&quot;Justice&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

collection<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span>searchObject<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> track</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// You can do something with the track here.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Notice that you give a callback function as the second argument to <code>findOne</code>.</p>
<p>If you want to get the document with the <code>ObjectId</code> with the string <code>&apos;5cf2eb7d1c9d4400006fca92&apos;</code>, you can do this:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> string <span class="token operator">=</span> <span class="token string">&quot;5cf2eb7d1c9d4400006fca92&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongodb<span class="token punctuation">.</span>ObjectID</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> searchObject <span class="token operator">=</span> <span class="token punctuation">{</span> _id<span class="token operator">:</span> id <span class="token punctuation">}</span><span class="token punctuation">;</span>

collection<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span>searchObject<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> track</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Let&apos;s try this in our code:</p>
<pre class="language-"><code class="lang-js">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongodb<span class="token punctuation">.</span>MongoClient</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">;</span>

  client<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> db <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">db</span><span class="token punctuation">(</span><span class="token string">&quot;music&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> collection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;tracks&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> string <span class="token operator">=</span> <span class="token string">&quot;5cf2eb7d1c9d4400006fca92&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongodb<span class="token punctuation">.</span>ObjectID</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> searchObject <span class="token operator">=</span> <span class="token punctuation">{</span> _id<span class="token operator">:</span> id <span class="token punctuation">}</span><span class="token punctuation">;</span>

    collection<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span>searchObject<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> track</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>error <span class="token operator">||</span> track<span class="token punctuation">)</span><span class="token punctuation">;</span>
      client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Now, we should only get the one track with that ID (not an array).</p>
<h4 id="exercises">Exercises</h4>
<ol>
<li><p>Add an endpoint <code>/tracks/:id</code> that returns only the track with the given ID. For example, if you go to <code>/tracks/5cf2eb7d1c9d4400006fca92</code>, you should get only the track with the ID <code>5cf2eb7d1c9d4400006fca92</code>. Make sure that it does not return an array. Make sure that <code>/tracks/search</code> still works.</p>
</li>
<li><p>What happens when you give a 24-character ID that does not exist in the database? For example, try going to <code>/tracks/0123456789abcdef01234567</code>. Update the endpoint so that it returns a <code>404</code> status when this happens.</p>
</li>
<li><p>What happens when you try to give an ID that is not 24 characters long or has non-hexadecimal characters? For example, try going to <code>/tracks/foobar</code>. Update the <code>/tracks/:id</code> endpoint so that it returns a <code>400</code> status when there is that kind of error.</p>
</li>
</ol>
<h2 id="optional-search-operations">Optional: search operations</h2>
<h3 id="or"><code>$or</code></h3>
<p>What if we want to get tracks with the artist Justice <em>or</em> Sebastian? We have to check for either <code>&quot;artist&quot;: &quot;Justice&quot;</code> <em>or</em> <code>&quot;artist&quot;: &quot;Sebastian&quot;</code>.</p>
<p>To get all documents with any of multiple field values, you can use the special <code>$or</code> key in your search object with an array value of other search objects.</p>
<p>If we want all tracks by Justice or Sebastian, we can do this:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> searchObject <span class="token operator">=</span> <span class="token punctuation">{</span>
  $or<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> artist<span class="token operator">:</span> <span class="token string">&quot;Justice&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> artist<span class="token operator">:</span> <span class="token string">&quot;Sebastian&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>searchObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Let&apos;s put this in our code:</p>
<pre class="language-"><code class="lang-js">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongodb<span class="token punctuation">.</span>MongoClient</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">;</span>

  client<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> db <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">db</span><span class="token punctuation">(</span><span class="token string">&quot;music&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> collection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;tracks&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> searchObject <span class="token operator">=</span> <span class="token punctuation">{</span>
      $or<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> artist<span class="token operator">:</span> <span class="token string">&quot;Justice&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> artist<span class="token operator">:</span> <span class="token string">&quot;Sebastian&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>searchObject<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> tracks</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>error <span class="token operator">||</span> tracks<span class="token punctuation">)</span><span class="token punctuation">;</span>
      client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Now, when the user goes to <code>/</code>, they should only tracks by Justice and tracks by Sebastian.</p>
<p>What if we want</p>
<ol>
<li>tracks by Justice from 2007 and</li>
<li>tracks by Sebastian from 2006?</li>
</ol>
<p>Here, we can just update our search objects like this:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> searchObject <span class="token operator">=</span> <span class="token punctuation">{</span>
  $or<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> artist<span class="token operator">:</span> <span class="token string">&quot;Justice&quot;</span><span class="token punctuation">,</span> year<span class="token operator">:</span> <span class="token number">2007</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> artist<span class="token operator">:</span> <span class="token string">&quot;Sebastian&quot;</span><span class="token punctuation">,</span> year<span class="token operator">:</span> <span class="token number">2006</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>searchObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Let&apos;s put this in our code:</p>
<pre class="language-"><code class="lang-js">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongodb<span class="token punctuation">.</span>MongoClient</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">;</span>

  client<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> db <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">db</span><span class="token punctuation">(</span><span class="token string">&quot;music&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> collection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;tracks&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> searchObject <span class="token operator">=</span> <span class="token punctuation">{</span>
      $or<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> artist<span class="token operator">:</span> <span class="token string">&quot;Justice&quot;</span><span class="token punctuation">,</span> year<span class="token operator">:</span> <span class="token number">2007</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> artist<span class="token operator">:</span> <span class="token string">&quot;Sebastian&quot;</span><span class="token punctuation">,</span> year<span class="token operator">:</span> <span class="token number">2006</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>searchObject<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> tracks</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>error <span class="token operator">||</span> tracks<span class="token punctuation">)</span><span class="token punctuation">;</span>
      client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Now, the user will get all tracks whose artists is either Justice or Sebastian.</p>
<h3 id="ne-gt-gte-lt-lte"><code>$ne</code>, <code>$gt</code>, <code>$gte</code>, <code>$lt</code>, <code>$lte</code></h3>
<p>So far, we have searched for documents with field values equal to something. However, we also have more options.</p>
<p>If you want to get documents with field values <em>not equal</em> to something, you can a special field value object with the <code>$ne</code> key and the value that you do not want.</p>
<p>For example, if you want to get all tracks whose artist is not Justice, you can do this:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> searchObject <span class="token operator">=</span> <span class="token punctuation">{</span>
  artist<span class="token operator">:</span> <span class="token punctuation">{</span>
    $ne<span class="token operator">:</span> <span class="token string">&quot;Justice&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>searchObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Let&apos;s try this in our code:</p>
<pre class="language-"><code class="lang-js">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongodb<span class="token punctuation">.</span>MongoClient</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">;</span>

  client<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> db <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">db</span><span class="token punctuation">(</span><span class="token string">&quot;music&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> collection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;tracks&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> searchObject <span class="token operator">=</span> <span class="token punctuation">{</span>
      artist<span class="token operator">:</span> <span class="token punctuation">{</span>
        $ne<span class="token operator">:</span> <span class="token string">&quot;Justice&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>searchObject<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> tracks</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>error <span class="token operator">||</span> tracks<span class="token punctuation">)</span><span class="token punctuation">;</span>
      client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Now, when you visit the page, you should see all tracks whose artist is not Justice.</p>
<p>You can also search for documents with a field value <em>greater than</em> something. To do this, you can do the same thing, except you use the <code>$gt</code> key.</p>
<p>For example, to get tracks released after 2006, you can do this:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> searchObject <span class="token operator">=</span> <span class="token punctuation">{</span>
  year<span class="token operator">:</span> <span class="token punctuation">{</span>
    $gt<span class="token operator">:</span> <span class="token number">2006</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>searchObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Let&apos;s try this in our code, too:</p>
<pre class="language-"><code class="lang-js">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongodb<span class="token punctuation">.</span>MongoClient</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">;</span>

  client<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> db <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">db</span><span class="token punctuation">(</span><span class="token string">&quot;music&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> collection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;tracks&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> searchObject <span class="token operator">=</span> <span class="token punctuation">{</span>
      year<span class="token operator">:</span> <span class="token punctuation">{</span>
        $gt<span class="token operator">:</span> <span class="token number">2006</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>searchObject<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> tracks</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>error <span class="token operator">||</span> tracks<span class="token punctuation">)</span><span class="token punctuation">;</span>
      client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Now, we should only get tracks from 2007 or later.</p>
<p>If you want to also include tracks from 2006, you could use <code>$gte</code> instead:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> searchObject <span class="token operator">=</span> <span class="token punctuation">{</span>
  year<span class="token operator">:</span> <span class="token punctuation">{</span>
    $gte<span class="token operator">:</span> <span class="token number">2006</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>searchObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>This would get tracks from a year <em>greater than or equal to</em> 2006.</p>
<p>Following this pattern, you can also use <code>$lt</code> for field values <em>less than</em> something, and you can use <code>$lte</code> for field values <em>less than or equal to</em> something.</p>
<h4 id="exercises">Exercises:</h4>
<ol>
<li>Add an endpoint <code>/tracks/new</code> that returns only the tracks released after 2010.</li>
<li>Add an endpoint <code>/tracks/old</code> that returns only the tracks released before 2000.</li>
</ol>
<h1 id="homework">Homework</h1>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../" class="navigation navigation-prev " aria-label="Previous page: MongoDB">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../week-2/lesson.html" class="navigation navigation-next " aria-label="Next page: Week 2 - More MongoDB">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Week 1 - Introduction to MongoDB","level":"1.10.1","depth":2,"next":{"title":"Week 2 - More MongoDB","level":"1.10.2","depth":2,"path":"mongodb/week-2/lesson.md","ref":"mongodb/week-2/lesson.md","articles":[]},"previous":{"title":"MongoDB","level":"1.10","depth":1,"path":"mongodb/index.md","ref":"mongodb/index.md","articles":[{"title":"Week 1 - Introduction to MongoDB","level":"1.10.1","depth":2,"path":"mongodb/week-1/lesson.md","ref":"mongodb/week-1/lesson.md","articles":[]},{"title":"Week 2 - More MongoDB","level":"1.10.2","depth":2,"path":"mongodb/week-2/lesson.md","ref":"mongodb/week-2/lesson.md","articles":[]},{"title":"Week 3 - Advanced MongoDB","level":"1.10.3","depth":2,"path":"mongodb/week-3/lesson.md","ref":"mongodb/week-3/lesson.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["prism","-highlight"],"pluginsConfig":{"prism":{"css":["prismjs/themes/prism-tomorrow.css"]},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"mongodb/week-1/lesson.md","mtime":"2020-07-04T09:58:35.840Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-07-04T09:59:23.773Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

